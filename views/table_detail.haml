%table#main.zebra
  %thead
    %tr
      - @table.schema.each do |header|
        %td
          %a(href='#{@path}?o=#{header.first}&l=#{@table.params_list["l"]}')
            #{header.first.to_s.gsub('_',' ').capitalize}
  %tbody
    - @table.row_list.each do |row|
      %tr
        - @table.schema.each do |schema|
          %td
            -# Use facebox for longtext fields
            - if schema.last[:db_type] == 'longtext'
              [ 
              %a(href="#info#{row.object_id}#{schema.object_id}" rel="facebox")< Show field
              ]
              %div(id="info#{row.object_id}#{schema.object_id}" class="hidden")
                %textarea{ :style => "width:60em; height: 30em;" }
                  #{row[schema.first]}

            - elsif schema.last[:type] == :boolean
              - if row[schema.first] == true
                %img{ :src => '/img/icon-yes.gif' }
              - else
                %img{ :src => '/img/icon-no.gif' }

            - else
              -# Show the actual data
              %a(href="#info#{row.object_id}#{schema.object_id}" rel="facebox") #{row[schema.first]}
              %div(id="info#{row.object_id}#{schema.object_id}" class="hidden")
                %h2= schema.first.to_s.capitalize
                %input(type="text" style="width:40em" value="#{row[schema.first]}")
